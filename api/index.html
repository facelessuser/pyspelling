<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Python spell checker."><link href=https://facelessuser.github.io/pyspelling/api/ rel=canonical><link href=../pipeline/ rel=prev><link href=../filters/context/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.18"><title>Plugin API - PySpelling</title><link rel=stylesheet href=../assets/stylesheets/main.7e37652d.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><script src=../assets/pymdownx-extras/material-extra-theme-2ek1P7jT.js type=text/javascript></script><script src=../assets/pymdownx-extras/material-extra-3rdparty-BUCF4rjN.js type=text/javascript></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../assets/pymdownx-extras/extra-c6ab11540a.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=dracula data-md-color-primary=deep-purple data-md-color-accent=deep-purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#plugin-api class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <a href=../about/contributing/#contributing--support>Sponsorship</a> is now available! <span class="twemoji heart-throb"> <svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewbox="0 0 16 16"><path fill-rule=evenodd d="M7.655 14.916L8 14.25l.345.666a.752.752 0 01-.69 0zm0 0L8 14.25l.345.666.002-.001.006-.003.018-.01a7.643 7.643 0 00.31-.17 22.08 22.08 0 003.433-2.414C13.956 10.731 16 8.35 16 5.5 16 2.836 13.914 1 11.75 1 10.203 1 8.847 1.802 8 3.02 7.153 1.802 5.797 1 4.25 1 2.086 1 0 2.836 0 5.5c0 2.85 2.045 5.231 3.885 6.818a22.075 22.075 0 003.744 2.584l.018.01.006.003h.002z"/></svg> </span> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=header.title> <a href=https://facelessuser.github.io/pyspelling/ title=PySpelling class="md-header__button md-logo" aria-label=PySpelling> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> PySpelling </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Plugin API </span> </div> </div> </div> <div class=md-header__options> <div class="md-header-nav__scheme md-header-nav__button md-source__icon md-icon"> <a href=javascript:toggleScheme(); title="Light mode" class=light-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </a> <a href=javascript:toggleScheme(); title="Dark mode" class=dark-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </a> <a href=javascript:toggleScheme(); title="System preference" class=system-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M7.5 2c-1.79 1.15-3 3.18-3 5.5s1.21 4.35 3.03 5.5C4.46 13 2 10.54 2 7.5A5.5 5.5 0 0 1 7.5 2m11.57 1.5 1.43 1.43L4.93 20.5 3.5 19.07zm-6.18 2.43L11.41 5 9.97 6l.42-1.7L9 3.24l1.75-.12.58-1.65L12 3.1l1.73.03-1.35 1.13zm-3.3 3.61-1.16-.73-1.12.78.34-1.32-1.09-.83 1.36-.09.45-1.29.51 1.27 1.36.03-1.05.87zM19 13.5a5.5 5.5 0 0 1-5.5 5.5c-1.22 0-2.35-.4-3.26-1.07l7.69-7.69c.67.91 1.07 2.04 1.07 3.26m-4.4 6.58 2.77-1.15-.24 3.35zm4.33-2.7 1.15-2.77 2.2 2.54zm1.15-4.96-1.14-2.78 3.34.24zM9.63 18.93l2.77 1.15-2.53 2.19z"/></svg> </a> <a href=javascript:toggleScheme(); title="Unknown scheme" class=unknown-mode> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m15.07 11.25-.9.92C13.45 12.89 13 13.5 13 15h-2v-.5c0-1.11.45-2.11 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41a2 2 0 0 0-2-2 2 2 0 0 0-2 2H8a4 4 0 0 1 4-4 4 4 0 0 1 4 4 3.2 3.2 0 0 1-.93 2.25M13 19h-2v-2h2M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10c0-5.53-4.5-10-10-10"/></svg> </a> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/facelessuser/pyspelling title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class="md-tabs__item md-tabs__item--active"> <a href=.. class=md-tabs__link> Usage </a> </li> <li class=md-tabs__item> <a href=../filters/context/ class=md-tabs__link> Filters </a> </li> <li class=md-tabs__item> <a href=../flow_control/wildcard/ class=md-tabs__link> Flow Control </a> </li> <li class=md-tabs__item> <a href=../about/contributing/ class=md-tabs__link> About </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=PySpelling class="md-nav__button md-logo" aria-label=PySpelling data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m19 2-5 4.5v11l5-4.5zM6.5 5C4.55 5 2.45 5.4 1 6.5v14.66c0 .25.25.5.5.5.1 0 .15-.07.25-.07 1.35-.65 3.3-1.09 4.75-1.09 1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.31 4.75 1.06.1.05.15.03.25.03.25 0 .5-.25.5-.5V6.5c-.6-.45-1.25-.75-2-1V19c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V6.5C10.55 5.4 8.45 5 6.5 5"/></svg> </a> PySpelling </label> <div class=md-nav__source> <a href=https://github.com/facelessuser/pyspelling title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1 checked> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex> <span class=md-ellipsis> Usage </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=true> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Usage </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Setup &amp; Overview </span> </a> </li> <li class=md-nav__item> <a href=../configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../pipeline/ class=md-nav__link> <span class=md-ellipsis> Spelling Pipeline </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Plugin API </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Plugin API </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#filters class=md-nav__link> <span class=md-ellipsis> Filters </span> </a> <nav class=md-nav aria-label=Filters> <ul class=md-nav__list> <li class=md-nav__item> <a href=#filter class=md-nav__link> <span class=md-ellipsis> Filter </span> </a> </li> <li class=md-nav__item> <a href=#filterget_default_config class=md-nav__link> <span class=md-ellipsis> Filter.get_default_config </span> </a> </li> <li class=md-nav__item> <a href=#filtervalidate_options class=md-nav__link> <span class=md-ellipsis> Filter.validate_options </span> </a> </li> <li class=md-nav__item> <a href=#filtersetup class=md-nav__link> <span class=md-ellipsis> Filter.setup </span> </a> </li> <li class=md-nav__item> <a href=#filterreset class=md-nav__link> <span class=md-ellipsis> Filter.reset </span> </a> </li> <li class=md-nav__item> <a href=#filterhas_bom class=md-nav__link> <span class=md-ellipsis> Filter.has_bom </span> </a> </li> <li class=md-nav__item> <a href=#filterheader_check class=md-nav__link> <span class=md-ellipsis> Filter.header_check </span> </a> </li> <li class=md-nav__item> <a href=#filtercontent_check class=md-nav__link> <span class=md-ellipsis> Filter.content_check </span> </a> </li> <li class=md-nav__item> <a href=#filterfilter class=md-nav__link> <span class=md-ellipsis> Filter.filter </span> </a> </li> <li class=md-nav__item> <a href=#filtersfilter class=md-nav__link> <span class=md-ellipsis> Filter.sfilter </span> </a> </li> <li class=md-nav__item> <a href=#get_plugin class=md-nav__link> <span class=md-ellipsis> get_plugin </span> </a> </li> <li class=md-nav__item> <a href=#sourcetext class=md-nav__link> <span class=md-ellipsis> SourceText </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#flow-control class=md-nav__link> <span class=md-ellipsis> Flow Control </span> </a> <nav class=md-nav aria-label="Flow Control"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#flowcontrol class=md-nav__link> <span class=md-ellipsis> FlowControl </span> </a> </li> <li class=md-nav__item> <a href=#flowcontrolget_default_config class=md-nav__link> <span class=md-ellipsis> FlowControl.get_default_config </span> </a> </li> <li class=md-nav__item> <a href=#flowcontrolvalidate_options class=md-nav__link> <span class=md-ellipsis> FlowControl.validate_options </span> </a> </li> <li class=md-nav__item> <a href=#flowcontrolsetup class=md-nav__link> <span class=md-ellipsis> FlowControl.setup </span> </a> </li> <li class=md-nav__item> <a href=#flowcontrolreset class=md-nav__link> <span class=md-ellipsis> FlowControl.reset </span> </a> </li> <li class=md-nav__item> <a href=#flowcontroladjust_flow class=md-nav__link> <span class=md-ellipsis> FlowControl.adjust_flow </span> </a> </li> <li class=md-nav__item> <a href=#get_plugin_1 class=md-nav__link> <span class=md-ellipsis> get_plugin </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Filters </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Filters </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../filters/context/ class=md-nav__link> <span class=md-ellipsis> Context </span> </a> </li> <li class=md-nav__item> <a href=../filters/cpp/ class=md-nav__link> <span class=md-ellipsis> CPP </span> </a> </li> <li class=md-nav__item> <a href=../filters/html/ class=md-nav__link> <span class=md-ellipsis> HTML </span> </a> </li> <li class=md-nav__item> <a href=../filters/javascript/ class=md-nav__link> <span class=md-ellipsis> JavaScript </span> </a> </li> <li class=md-nav__item> <a href=../filters/markdown/ class=md-nav__link> <span class=md-ellipsis> Markdown </span> </a> </li> <li class=md-nav__item> <a href=../filters/odf/ class=md-nav__link> <span class=md-ellipsis> ODF </span> </a> </li> <li class=md-nav__item> <a href=../filters/ooxml/ class=md-nav__link> <span class=md-ellipsis> OOXML </span> </a> </li> <li class=md-nav__item> <a href=../filters/python/ class=md-nav__link> <span class=md-ellipsis> Python </span> </a> </li> <li class=md-nav__item> <a href=../filters/stylesheets/ class=md-nav__link> <span class=md-ellipsis> Stylesheets </span> </a> </li> <li class=md-nav__item> <a href=../filters/text/ class=md-nav__link> <span class=md-ellipsis> Text </span> </a> </li> <li class=md-nav__item> <a href=../filters/url/ class=md-nav__link> <span class=md-ellipsis> URL </span> </a> </li> <li class=md-nav__item> <a href=../filters/xml/ class=md-nav__link> <span class=md-ellipsis> XML </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Flow Control </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Flow Control </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../flow_control/wildcard/ class=md-nav__link> <span class=md-ellipsis> Wildcard </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> About </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> About </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../about/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing &amp; Support </span> </a> </li> <li class=md-nav__item> <a href=../about/development/ class=md-nav__link> <span class=md-ellipsis> Development </span> </a> </li> <li class=md-nav__item> <a href=../about/changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> <li class=md-nav__item> <a href=../about/license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#filters class=md-nav__link> <span class=md-ellipsis> Filters </span> </a> <nav class=md-nav aria-label=Filters> <ul class=md-nav__list> <li class=md-nav__item> <a href=#filter class=md-nav__link> <span class=md-ellipsis> Filter </span> </a> </li> <li class=md-nav__item> <a href=#filterget_default_config class=md-nav__link> <span class=md-ellipsis> Filter.get_default_config </span> </a> </li> <li class=md-nav__item> <a href=#filtervalidate_options class=md-nav__link> <span class=md-ellipsis> Filter.validate_options </span> </a> </li> <li class=md-nav__item> <a href=#filtersetup class=md-nav__link> <span class=md-ellipsis> Filter.setup </span> </a> </li> <li class=md-nav__item> <a href=#filterreset class=md-nav__link> <span class=md-ellipsis> Filter.reset </span> </a> </li> <li class=md-nav__item> <a href=#filterhas_bom class=md-nav__link> <span class=md-ellipsis> Filter.has_bom </span> </a> </li> <li class=md-nav__item> <a href=#filterheader_check class=md-nav__link> <span class=md-ellipsis> Filter.header_check </span> </a> </li> <li class=md-nav__item> <a href=#filtercontent_check class=md-nav__link> <span class=md-ellipsis> Filter.content_check </span> </a> </li> <li class=md-nav__item> <a href=#filterfilter class=md-nav__link> <span class=md-ellipsis> Filter.filter </span> </a> </li> <li class=md-nav__item> <a href=#filtersfilter class=md-nav__link> <span class=md-ellipsis> Filter.sfilter </span> </a> </li> <li class=md-nav__item> <a href=#get_plugin class=md-nav__link> <span class=md-ellipsis> get_plugin </span> </a> </li> <li class=md-nav__item> <a href=#sourcetext class=md-nav__link> <span class=md-ellipsis> SourceText </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#flow-control class=md-nav__link> <span class=md-ellipsis> Flow Control </span> </a> <nav class=md-nav aria-label="Flow Control"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#flowcontrol class=md-nav__link> <span class=md-ellipsis> FlowControl </span> </a> </li> <li class=md-nav__item> <a href=#flowcontrolget_default_config class=md-nav__link> <span class=md-ellipsis> FlowControl.get_default_config </span> </a> </li> <li class=md-nav__item> <a href=#flowcontrolvalidate_options class=md-nav__link> <span class=md-ellipsis> FlowControl.validate_options </span> </a> </li> <li class=md-nav__item> <a href=#flowcontrolsetup class=md-nav__link> <span class=md-ellipsis> FlowControl.setup </span> </a> </li> <li class=md-nav__item> <a href=#flowcontrolreset class=md-nav__link> <span class=md-ellipsis> FlowControl.reset </span> </a> </li> <li class=md-nav__item> <a href=#flowcontroladjust_flow class=md-nav__link> <span class=md-ellipsis> FlowControl.adjust_flow </span> </a> </li> <li class=md-nav__item> <a href=#get_plugin_1 class=md-nav__link> <span class=md-ellipsis> get_plugin </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=plugin-api>Plugin API<a class=headerlink href=#plugin-api title="Permanent link"></a></h1> <h2 id=filters>Filters<a class=headerlink href=#filters title="Permanent link"></a></h2> <p>When writing a <code>Filter</code> plugin, there are two classes to be aware: <code>Filter</code> and <code>SourceText</code>. Both classes are found in <code>pyspelling.filters</code>.</p> <p>Each chunk returned by a filter is a <code>SourceText</code> object. These objects contain the desired, filtered text from the previous filter along with some metadata: encoding, display context, and a category that describes what kind of text the data is. After all filters have processed the text, each <code>SourceText</code>'s content is finally passed to the spell checker.</p> <p>The text data in a <code>SourceText</code> object is always Unicode, but during the filtering process, the filter can decode the Unicode if required as long as it is returned as Unicode at the end of the step.</p> <h3 id=filter><code>Filter</code><a class=headerlink href=#filter title="Permanent link"></a></h3> <p><code>Filter</code> plugins are subclassed from the <code>Filter</code> class. You'll often want to specify the defaulted value for <code>default_encoding</code> in the <code>__init__</code>. Simply give it a default value as shown below.</p> <div class=highlight><pre><span></span><code><span class=kn>from</span><span class=w> </span><span class=nn>..</span><span class=w> </span><span class=kn>import</span> <span class=n>filters</span>


<span class=k>class</span><span class=w> </span><span class=nc>MyFilter</span><span class=p>(</span><span class=n>filters</span><span class=o>.</span><span class=n>Filter</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Spelling Filter.&quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>options</span><span class=p>,</span> <span class=n>default_encoding</span><span class=o>=</span><span class=s1>&#39;utf-8&#39;</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Initialization.&quot;&quot;&quot;</span>

        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>options</span><span class=p>,</span> <span class=n>default_encoding</span><span class=p>)</span>
</code></pre></div> <h3 id=filterget_default_config><code>Filter.get_default_config</code><a class=headerlink href=#filterget_default_config title="Permanent link"></a></h3> <p><code>get_default_config</code> is where you should specify your default configuration file. This should contain all accepted options and their default value. All user options that are passed in will override the defaults. If an option is passed in that is not found in the defaults, an error will be raised.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>get_default_config</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get default configuration.&quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=p>{</span>
            <span class=s2>&quot;enable_something&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
            <span class=s2>&quot;list_of_stuff&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;some&#39;</span><span class=p>,</span> <span class=s1>&#39;stuff&#39;</span><span class=p>]</span>
        <span class=p>}</span>
</code></pre></div> <div class="admonition new"> <p class=admonition-title>"New 2.0</p> <p><code>get_default_confg</code> was added in version <code>2.0</code>.</p> </div> <h3 id=filtervalidate_options><code>Filter.validate_options</code><a class=headerlink href=#filtervalidate_options title="Permanent link"></a></h3> <p><code>validate_options</code> is where you can specify validation of your options. By default, basic validation is done on incoming options. For instance, if you specify a default as a <code>bool</code>, the default validator will ensure the passed user options match. Checking is performed on <code>bool</code>, <code>str</code>, <code>list</code>, <code>dict</code>, <code>int</code>, and <code>float</code> types. Nothing beyond simple type checking is performed, so if you had some custom validation, or simply wanted to bypass the default validator with your own, you should override <code>validate_options</code>.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>validate_options</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Validate options.&quot;&quot;&quot;</span>

        <span class=c1># Call the basic validator</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>validate_options</span><span class=p>(</span><span class=n>k</span><span class=p>,</span> <span class=n>v</span><span class=p>)</span>

        <span class=c1># Perform custom validation</span>
        <span class=k>if</span> <span class=n>k</span> <span class=o>==</span> <span class=s2>&quot;foo&quot;</span> <span class=ow>and</span> <span class=n>v</span> <span class=o>!=</span> <span class=s2>&quot;bar&quot;</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Value should be &#39;bar&#39; for &#39;foo&#39;&quot;</span><span class=p>)</span>
</code></pre></div> <div class="admonition new"> <p class=admonition-title>New 2.0</p> <p><code>validate_options</code> was added in version <code>2.0</code>.</p> </div> <h3 id=filtersetup><code>Filter.setup</code><a class=headerlink href=#filtersetup title="Permanent link"></a></h3> <p><code>setup</code> is were basic setup can be performed post-validation. At this point, you can access the merged and validated configuration via <code>self.config</code>.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>setup</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Setup.&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>enable_foo</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;foo&#39;</span><span class=p>]</span>
</code></pre></div> <div class="admonition new"> <p class=admonition-title>New 2.0</p> <p><code>setup</code> was added in version <code>2.0</code>.</p> </div> <h3 id=filterreset><code>Filter.reset</code><a class=headerlink href=#filterreset title="Permanent link"></a></h3> <p><code>reset</code> is called on every new call to the plugin. It allows you to clean up states from previous calls.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>reset</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reset&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>counter</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>tracked_stuff</span> <span class=o>=</span> <span class=p>[]</span>
</code></pre></div> <div class="admonition new"> <p class=admonition-title>New 2.0</p> <p><code>reset</code> was added in version <code>2.0</code>.</p> </div> <h3 id=filterhas_bom><code>Filter.has_bom</code><a class=headerlink href=#filterhas_bom title="Permanent link"></a></h3> <p><code>has_bom</code> takes a file stream and is usually used to check the first few bytes. While BOM checking could be performed in <code>header_check</code>, this mainly provided as <code>UTF</code> BOMs are quite common in many file types, so a specific test was dedicated to it. Additionally, this replaces the old, less flexible <code>CHECK_BOM</code> attribute that was deprecated in version <code>1.2</code>.</p> <p>This is useful if you want to handle binary parsing, or a file type that has a custom BOM in the header. When returning encoding in any of the encoding check functions, <code>None</code> means no encoding was detecting, an empty string means binary data (encoding validation is skipped), and anything else will be validated and passed through. Just be sure to include a sensible encoding in your <code>SourceText</code> object when your plugin returns file content.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>has_bom</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filestream</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Check if has BOM.&quot;&quot;&quot;</span>

        <span class=n>content</span> <span class=o>=</span> <span class=n>filestream</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>content</span> <span class=o>==</span> <span class=sa>b</span><span class=s1>&#39;PK</span><span class=se>\x03\x04</span><span class=s1>&#39;</span><span class=p>:</span>
            <span class=c1># Zip file found.</span>
            <span class=c1># Return `BINARY_ENCODE` as content is binary type,</span>
            <span class=c1># but don&#39;t return None which means we don&#39;t know what we have.</span>
            <span class=k>return</span> <span class=n>filters</span><span class=o>.</span><span class=n>BINARY_ENCODE</span>
        <span class=c1># Not a zip file, so pass it on to the normal file checker.</span>
        <span class=k>return</span> <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>has_bom</span><span class=p>(</span><span class=n>filestream</span><span class=p>)</span>
</code></pre></div> <div class="admonition new"> <p class=admonition-title>New 2.0</p> <p><code>has_bom</code> was added in version <code>2.0</code>.</p> </div> <div class="admonition warning"> <p class=admonition-title>Deprecation 2.0</p> <p><code>CHECK_BOM</code> has been deprecated since <code>2.0</code>.</p> </div> <h3 id=filterheader_check><code>Filter.header_check</code><a class=headerlink href=#filterheader_check title="Permanent link"></a></h3> <p><code>header_check</code> is a function that receives the first 1024 characters of the file via <code>content</code> that can be scanned for an encoding header. A string with the encoding name should be returned or <code>None</code> if a valid encoding header cannot be found.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>header_check</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>content</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Special encode check.&quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=kc>None</span>
</code></pre></div> <h3 id=filtercontent_check><code>Filter.content_check</code><a class=headerlink href=#filtercontent_check title="Permanent link"></a></h3> <p><code>content_check</code> receives a file object which allows you to check the entire file buffer to determine encoding. A string with the encoding name should be returned or <code>None</code> if a valid encoding header cannot be found.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>content_check</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>filestream</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;File content check.&quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=kc>None</span>
</code></pre></div> <h3 id=filterfilter><code>Filter.filter</code><a class=headerlink href=#filterfilter title="Permanent link"></a></h3> <p><code>filter</code> is called when the <code>Filter</code> object is the first in the chain. This means the file has not been read from disk yet, so we must handle opening the file before applying the filter and then return a list of <code>SourceText</code> objects. The first filter in the chain is handled differently in order to give the opportunity to handle files that require more complex methods to acquire the Unicode strings. You can read the file in binary format or directly to Unicode. You can run parsers or anything else you need in order to get the required Unicode text for the <code>SourceText</code> objects. You can create as many <code>SourceText</code> objects as you desired and assign them categories so that other <code>Filter</code> objects can avoid them if desired. Below is the default which reads the entire file into a single object providing the file name as the context, the encoding, and the category <code>text</code>.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>filter</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>source_file</span><span class=p>,</span> <span class=n>encoding</span><span class=p>):</span>  <span class=c1># noqa A001</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Open and filter the file from disk.&quot;&quot;&quot;</span>

        <span class=k>with</span> <span class=n>codecs</span><span class=o>.</span><span class=n>open</span><span class=p>(</span><span class=n>source_file</span><span class=p>,</span> <span class=s1>&#39;r&#39;</span><span class=p>,</span> <span class=n>encoding</span><span class=o>=</span><span class=n>encoding</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
            <span class=n>text</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
        <span class=k>return</span> <span class=p>[</span><span class=n>SourceText</span><span class=p>(</span><span class=n>text</span><span class=p>,</span> <span class=n>source_file</span><span class=p>,</span> <span class=n>encoding</span><span class=p>,</span> <span class=s1>&#39;text&#39;</span><span class=p>)]</span>
</code></pre></div> <h3 id=filtersfilter><code>Filter.sfilter</code><a class=headerlink href=#filtersfilter title="Permanent link"></a></h3> <p><code>sfilter</code> is called for all <code>Filter</code> objects following the first. The function is passed a <code>SourceText</code> object from which the text, context, encoding can all be extracted. Here you can manipulate the text back to bytes if needed, wrap the text in an <code>io.StreamIO</code> object to act as a file stream, run parsers, or anything you need to manipulate the buffer to filter the Unicode text for the <code>SourceText</code> objects.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>sfilter</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>source</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Execute filter.&quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=p>[</span><span class=n>SourceText</span><span class=p>(</span><span class=n>source</span><span class=o>.</span><span class=n>text</span><span class=p>,</span> <span class=n>source</span><span class=o>.</span><span class=n>context</span><span class=p>,</span> <span class=n>source</span><span class=o>.</span><span class=n>encoding</span><span class=p>,</span> <span class=s1>&#39;text&#39;</span><span class=p>)]</span>
</code></pre></div> <p>If a filter only works either as the first in the chain, or only as a secondary filter in the chain, you could raise an exception if needed. In most cases, you should be able to have an appropriate <code>filter</code> and <code>sfilter</code>, but there are most likely cases (particular when dealing with binary data) where only a <code>filter</code> method could be provided.</p> <p>Check out the default filter plugins provided with the source to see real world examples.</p> <h3 id=get_plugin><code>get_plugin</code><a class=headerlink href=#get_plugin title="Permanent link"></a></h3> <p>And don't forget to provide a function in the file called <code>get_plugin</code>! <code>get_plugin</code> is the entry point and should return your <code>Filter</code> object.</p> <div class=highlight><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_plugin</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return the filter.&quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>HtmlFilter</span>
</code></pre></div> <h3 id=sourcetext><code>SourceText</code><a class=headerlink href=#sourcetext title="Permanent link"></a></h3> <p>As previously mentioned, filters must return a list of <code>SourceText</code> objects.</p> <div class=highlight><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>SourceText</span><span class=p>(</span><span class=n>namedtuple</span><span class=p>(</span><span class=s1>&#39;SourceText&#39;</span><span class=p>,</span> <span class=p>[</span><span class=s1>&#39;text&#39;</span><span class=p>,</span> <span class=s1>&#39;context&#39;</span><span class=p>,</span> <span class=s1>&#39;encoding&#39;</span><span class=p>,</span> <span class=s1>&#39;category&#39;</span><span class=p>,</span> <span class=s1>&#39;error&#39;</span><span class=p>])):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Source text.&quot;&quot;&quot;</span>
</code></pre></div> <p>Each object should contain a Unicode string (<code>text</code>), some context on the given text hunk (<code>context</code>), the encoding which the Unicode text was originally in (<code>encoding</code>), and a <code>category</code> that is used to omit certain hunks from other filters in the chain (<code>category</code>). <code>SourceText</code> should not contain byte strings, and if they do, they will not be passed to additional filters. <code>error</code> is optional and is only provided message when something goes wrong.</p> <p>When receiving a <code>SourceText</code> object in your plugin, you can access the content via attributes with the same name as the parameters above:</p> <div class=highlight><pre><span></span><code><span class=gp>&gt;&gt;&gt; </span><span class=n>source</span><span class=o>.</span><span class=n>text</span>
<span class=go>&#39;Some Text&#39;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>source</span><span class=o>.</span><span class=n>context</span>
<span class=go>&#39;foo.txt&#39;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>source</span><span class=o>.</span><span class=n>encoding</span>
<span class=go>&#39;utf-8&#39;</span>
<span class=gp>&gt;&gt;&gt; </span><span class=n>source</span><span class=o>.</span><span class=n>category</span>
<span class=go>&#39;some-category&#39;</span>
</code></pre></div> <p>Be mindful when adjusting the context in subsequent items in the pipeline chain. Generally you should only append additional context so as not to wipe out previous contextual data. It may not always make sense to append additional data, so some filters might just pass the previous context as the new context.</p> <p>If you have a particular chunk of text that has a problem, you can return an error in the <code>SourceText</code> object. Errors really only need a context and the error as they won't be passed to the spell checker or to any subsequent steps in the pipeline. Errors are only used to alert the user that something went wrong. <code>SourceText</code> objects with errors will not be passed down the chain and will not be passed to the spell checker.</p> <div class=highlight><pre><span></span><code><span class=k>if</span> <span class=n>error</span><span class=p>:</span>
    <span class=n>content</span> <span class=o>=</span> <span class=p>[</span><span class=n>SourceText</span><span class=p>(</span><span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>source_file</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=s1>&#39;&#39;</span><span class=p>,</span> <span class=n>error</span><span class=p>)]</span>
</code></pre></div> <h2 id=flow-control>Flow Control<a class=headerlink href=#flow-control title="Permanent link"></a></h2> <p><code>FlowControl</code> plugins are simple plugins that take the category from a <code>SourceText</code> object, and simply returns either the directive <code>HALT</code>, <code>SKIP</code>, or <code>ALLOW</code>. This controls whether the associated <code>SourceText</code> object's progress is halted in the pipeline, skips the next filter, or is explicitly allowed in the next filter. The directives and <code>FlowControl</code> class are found in <code>pyspelling.flow_control</code>.</p> <h3 id=flowcontrol><code>FlowControl</code><a class=headerlink href=#flowcontrol title="Permanent link"></a></h3> <p><code>FlowControl</code> plugins should be subclassed from <code>FlowControl</code>. If you need to you can override the <code>__init__</code>, but remember to call the original with <code>super</code> to ensure options are handled.</p> <div class=highlight><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>MyFlowControl</span><span class=p>(</span><span class=n>flow_control</span><span class=o>.</span><span class=n>FlowControl</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Flow control plugin.&quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>config</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Initialization.&quot;&quot;&quot;</span>

        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>config</span><span class=p>)</span>
</code></pre></div> <h3 id=flowcontrolget_default_config><code>FlowControl.get_default_config</code><a class=headerlink href=#flowcontrolget_default_config title="Permanent link"></a></h3> <p><code>get_default_config</code> is where you should specify your default configuration file. This should contain all accepted options and their default value. All user options that are passed in will override the defaults. If an option is passed in that is not found in the defaults, an error will be raised.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>get_default_config</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get default configuration.&quot;&quot;&quot;</span>

        <span class=k>return</span> <span class=p>{</span>
            <span class=s2>&quot;enable_something&quot;</span><span class=p>:</span> <span class=kc>True</span><span class=p>,</span>
            <span class=s2>&quot;list_of_stuff&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s1>&#39;some&#39;</span><span class=p>,</span> <span class=s1>&#39;stuff&#39;</span><span class=p>]</span>
        <span class=p>}</span>
</code></pre></div> <div class="admonition new"> <p class=admonition-title>New 2.0</p> <p><code>get_default_confg</code> was added in version <code>2.0</code>.</p> </div> <h3 id=flowcontrolvalidate_options><code>FlowControl.validate_options</code><a class=headerlink href=#flowcontrolvalidate_options title="Permanent link"></a></h3> <p><code>validate_options</code> is where you can specify validation of your options. By default, basic validation is done on incoming options. For instance, if you specify a default as a <code>bool</code>, the default validator will ensure the passed user options match. Checking is performed on <code>bool</code>, <code>str</code>, <code>list</code>, <code>dict</code>, <code>int</code>, and <code>float</code> types. Nothing beyond simple type checking is performed, so if you had some custom validation, or simply wanted to bypass the default validator with your own, you should override <code>validate_options</code>.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>validate_options</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Validate options.&quot;&quot;&quot;</span>

        <span class=c1># Call the basic validator</span>
        <span class=nb>super</span><span class=p>()</span><span class=o>.</span><span class=n>validate_options</span><span class=p>(</span><span class=n>k</span><span class=p>,</span> <span class=n>v</span><span class=p>)</span>

        <span class=c1># Perform custom validation</span>
        <span class=k>if</span> <span class=n>k</span> <span class=o>==</span> <span class=s2>&quot;foo&quot;</span> <span class=ow>and</span> <span class=n>v</span> <span class=o>!=</span> <span class=s2>&quot;bar&quot;</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Value should be &#39;bar&#39; for &#39;foo&#39;&quot;</span><span class=p>)</span>
</code></pre></div> <div class="admonition new"> <p class=admonition-title>New 2.0</p> <p><code>validate_options</code> was added in version <code>2.0</code>.</p> </div> <h3 id=flowcontrolsetup><code>FlowControl.setup</code><a class=headerlink href=#flowcontrolsetup title="Permanent link"></a></h3> <p><code>setup</code> is were basic setup can be performed post-validation. At this point, you can access the merged and validated configuration via <code>self.config</code>.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>setup</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Setup.&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>enable_foo</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>config</span><span class=p>[</span><span class=s1>&#39;foo&#39;</span><span class=p>]</span>
</code></pre></div> <div class="admonition new"> <p class=admonition-title>New 2.0</p> <p><code>setup</code> was added in version <code>2.0</code>.</p> </div> <h3 id=flowcontrolreset><code>FlowControl.reset</code><a class=headerlink href=#flowcontrolreset title="Permanent link"></a></h3> <p><code>reset</code> is called on every new call to the plugin. It allows you to clean up states from previous calls.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>reset</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Reset&quot;&quot;&quot;</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>counter</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>tracked_stuff</span> <span class=o>=</span> <span class=p>[]</span>
</code></pre></div> <div class="admonition new"> <p class=admonition-title>New 2.0</p> <p><code>reset</code> was added in version <code>2.0</code>.</p> </div> <h3 id=flowcontroladjust_flow><code>FlowControl.adjust_flow</code><a class=headerlink href=#flowcontroladjust_flow title="Permanent link"></a></h3> <p>After handling the options, there is only one other function available for overrides: <code>adjust_flow</code>. Adjust flow receives the category from the <code>SourceText</code> being passed down the pipeline. Here the decision is made to as to what must be done with the object. Simply return <code>HALT</code>, <code>SKIP</code>, or <code>ALLOW</code> to control the flow for that <code>SourceText</code> object.</p> <div class=highlight><pre><span></span><code>    <span class=k>def</span><span class=w> </span><span class=nf>adjust_flow</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>category</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Adjust the flow of source control objects.&quot;&quot;&quot;</span>

        <span class=n>status</span> <span class=o>=</span> <span class=n>flow_control</span><span class=o>.</span><span class=n>SKIP</span>
        <span class=k>for</span> <span class=n>allow</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>allow</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>fnmatch</span><span class=o>.</span><span class=n>fnmatch</span><span class=p>(</span><span class=n>category</span><span class=p>,</span> <span class=n>allow</span><span class=p>,</span> <span class=n>flags</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>FNMATCH_FLAGS</span><span class=p>):</span>
                <span class=n>status</span> <span class=o>=</span> <span class=n>flow_control</span><span class=o>.</span><span class=n>ALLOW</span>
                <span class=k>for</span> <span class=n>skip</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>skip</span><span class=p>:</span>
                    <span class=k>if</span> <span class=n>fnmatch</span><span class=o>.</span><span class=n>fnmatch</span><span class=p>(</span><span class=n>category</span><span class=p>,</span> <span class=n>skip</span><span class=p>,</span> <span class=n>flags</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>FNMATCH_FLAGS</span><span class=p>):</span>
                        <span class=n>status</span> <span class=o>=</span> <span class=n>flow_control</span><span class=o>.</span><span class=n>SKIP</span>
                <span class=k>for</span> <span class=n>halt</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>halt</span><span class=p>:</span>
                    <span class=k>if</span> <span class=n>fnmatch</span><span class=o>.</span><span class=n>fnmatch</span><span class=p>(</span><span class=n>category</span><span class=p>,</span> <span class=n>halt</span><span class=p>,</span> <span class=n>flags</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>FNMATCH_FLAGS</span><span class=p>):</span>
                        <span class=n>status</span> <span class=o>=</span> <span class=n>flow_control</span><span class=o>.</span><span class=n>HALT</span>
                <span class=k>if</span> <span class=n>status</span> <span class=o>!=</span> <span class=n>flow_control</span><span class=o>.</span><span class=n>ALLOW</span><span class=p>:</span>
                    <span class=k>break</span>
        <span class=k>return</span> <span class=n>status</span>
</code></pre></div> <p>Check out the default flow control plugins provided with the source to see real world examples.</p> <h3 id=get_plugin_1><code>get_plugin</code><a class=headerlink href=#get_plugin_1 title="Permanent link"></a></h3> <p>And don't forget to provide a function in the file called <code>get_plugin</code>! <code>get_plugin</code> is the entry point and should return your <code>FlowControl</code> object.</p> <div class=highlight><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_plugin</span><span class=p>():</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get flow controller.&quot;&quot;&quot;</span>

    <span class=k>return</span> <span class=n>WildcardFlowControl</span>
</code></pre></div> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date" title="September 2, 2023 04:26:47 UTC">September 2, 2023</span> </span> </aside> <footer class=sponsorship> <hr> <a href=https://github.com/sponsors/facelessuser title="Become a sponsor"> <span class="twemoji heart-throb-hover"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 16 16"><path d="M7.655 14.916zh-.002l-.006-.003-.018-.01a22 22 0 0 1-3.744-2.584C2.045 10.731 0 8.35 0 5.5 0 2.836 2.086 1 4.25 1 5.797 1 7.153 1.802 8 3.02 8.847 1.802 10.203 1 11.75 1 13.914 1 16 2.836 16 5.5c0 2.85-2.044 5.231-3.886 6.818a22 22 0 0 1-3.433 2.414 7 7 0 0 1-.31.17l-.018.01-.008.004a.75.75 0 0 1-.69 0"/></svg> </span> </a> <hr> </footer> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=footer.title> <a href=../pipeline/ class="md-footer__link md-footer__link--prev" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> Spelling Pipeline </div> </div> </a> <a href=../filters/context/ class="md-footer__link md-footer__link--next" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Context </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2017 - 2024 <a href=https://github.com/facelessuser target=_blank rel=noopener>Isaac Muse</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> with emoji by <a href=https://github.com/twitter/twemoji target=_blank rel=noopener> Twemoji </a> </div> <div class=md-social> <a href=https://github.com/facelessuser target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill=currentColor d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": ["navigation.tabs", "navigation.top", "navigation.instant", "toc.follow", "content.code.copy", "navigation.footer", "search.share", "search.highlight", "search.suggest"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../assets/javascripts/bundle.92b07e13.min.js></script> <script src=../assets/pymdownx-extras/extra-loader-B5CKpNQx.js></script> </body> </html>